function page_init() { fill_grid() } function page_click() { $("#btnCancel").on("click", function (t) { t.preventDefault(), $("#hdfID").val("0"), $("#txtReachBy").val(""), $("#txtNearByStationName").val(""), $("#textremarks").val(""), $("#txtApproxTime").val(""), $("#drpApproxTimeType option:first").attr("selected", "selected"), $("#txtDistance").val(""), $("#drpDistanceType option:first").attr("selected", "selected") }), $("#btnNewReach").on("click", function (t) { t.preventDefault(), $("#hdfID").val("0"), $("#txtReachBy").val(""), $("#txtNearByStationName").val(""), $("#textremarks").val(""), $("#txtApproxTime").val(""), $("#drpApproxTimeType option:first").attr("selected", "selected"), $("#txtDistance").val(""), $("#drpDistanceType option:first").attr("selected", "selected") }), $("#btnSave").on("click", function (t) { t.preventDefault(); var e = $("#frm"); if (e.parsley().validate(), !e.parsley().isValid()) return !1; var a = $(this); a.addClass("disabled"), a.text("Processing..."), $.ajax({ method: "POST", url: $("#hdfBaseUrl").val() + "Institute/HowToReach/Save_Institute_How_To_Reach", data: e.serialize(), async: !1, success: function (t) { } }).done(function (t) { "false" == t.flag.toString().toLowerCase() ? (swal("Oops...!", "Something went wrong! Please try again."), a.text("Save"), a.removeClass("disabled")) : swal({ title: "Success!", text: "Data saved successfully", type: "", closeOnConfirm: !0, confirmButtonText: "OK", confirmButtonClass: "btn-primary", showLoaderOnConfirm: !0 }).then(function () { $("#btnCancel").trigger("click"), fill_grid() }), a.removeClass("disabled"), a.text("Save") }).error(function () { swal("Oops...!", "Please try after some time"), a.text("Save"), a.removeClass("disabled") }), a.removeClass("disabled"), a.text("Save") }), $("#tbody").on("click", ".btnEdit", function (t) { t.preventDefault(); var e = $(this).attr("data-id"); $.ajax({ method: "GET", url: $("#hdfBaseUrl").val() + "Institute/HowToReach/Select_Institute_How_To_Reach", data: { ID: e } }).done(function (t) { $.each(t.List, function (t, e) { $("#hdfID").val(e.ID), $("#drpmodeoftravel").val(e.ReachBy), $("#txtNearByStationName").val(e.NearByStationName), $("#txtApproxTime").val(e.ApproxTime), $("#drpApproxTimeType").val(e.ApproxTimeType), $("#txtDistance").val(e.Distance), $("#drpDistanceType").val(e.DistanceType), $("#txtReachBy").focus(), $("#txtReachBy"), $("#textremarks").val(e.remarks) }) }).error(function () { swal("Oops...!", "Please try after some time"), btn.text("Save"), btn.removeClass("disabled") }) }), $("#tbody").on("click", ".btnDelete", function (t) { t.preventDefault(); var e = $(this).attr("data-id"); swal({ title: "Are you sure?", text: "You will not be able to recover this data!", type: "", closeOnConfirm: !0, showCancelButton: !0, confirmButtonText: "Yes, delete it!", confirmButtonClass: "btn-warning", showLoaderOnConfirm: !0 }).then(function () { $.ajax({ method: "POST", url: $("#hdfBaseUrl").val() + "Institute/HowToReach/Delete_Institute_How_To_Reach", data: { ID: e }, success: function (t) { } }).done(function (t) { fill_grid(), swal("Success!", "Your data has been deleted.") }).error(function () { swal("Oops...!", "Something went wrong from our side.") }) }) }) } function fill_grid() { $.ajax({ method: "GET", url: $("#hdfBaseUrl").val() + "Institute/HowToReach/Select_Institute_How_To_Reach" }).done(function (t) { $("#tbody").html(""); var e = 1; if (t.List.length > 0) $.each(t.List, function (t, a) { var n = $("<tr></tr>"); n.append("<td>" + e++ + "</td>"), n.append("<td>" + a.ReachBy.toString() + "</td>"), n.append("<td>" + a.NearByStationName.toString() + "</td>"), n.append("<td>" + a.ApproxTime.toString() + " " + a.ApproxTimeType.toString() + "</td>"), n.append("<td>" + a.Distance.toString() + " " + a.DistanceType.toString() + "</td>"); var i = '<a class="btn btn-success btnEdit" data-id="' + a.ID + '"><i class="glyphicon glyphicon-pencil"></i></a>', o = '<a class="btn btn-danger btnDelete" data-id="' + a.ID + '"><i class="glyphicon glyphicon-trash"></i></a>'; n.append("<td>" + i + " " + o + "</td>"), $("#tbody").append(n) }); else { var a = $("<tr></tr>"); a.append('<td colspan="7">No data available.</td>'), $("#tbody").append(a) } }).error(function () { swal("Oops...!", "Please try after some time"), btn.text("Save"), btn.removeClass("disabled") }) } $(document).ready(function () { page_click(), page_init() });