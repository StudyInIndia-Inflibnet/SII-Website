function page_init_Alumni() { $("#txtAlumniName").SetAlphabetOnly(), $("#txtAlumniDesignation").SetAlphabetOnly(), $("#txtAlumniEmployer").SetAlphabetOnly(), fill_grid_Alumni() } function page_click_Alumni() { $("#btnCancelAlumni").on("click", function (t) { t.preventDefault(), $("#hdfAlumniID").val("0"), $("#txtAlumniName").val(""), $("#txtAlumniDesignation").val(""), $("#drpAlumniQualification").val(""), $("#txtAlumniEmployer").val(""), $("#txtAreaofExcellenceAlu").val("") }), $("#btnNewAlumni").on("click", function (t) { t.preventDefault(), $("#hdfAlumniID").val("0"), $("#txtAlumniName").val(""), $("#txtAlumniDesignation").val(""), $("#drpAlumniQualification").val(""), $("#txtAlumniEmployer").val(""), $("#txtAreaofExcellenceAlu").val("") }), $("#btnSaveAlumni").on("click", function (t) { t.preventDefault(); var e = $("#frmAlumni"); if (e.parsley().validate(), !e.parsley().isValid()) return !1; var a = $(this); if (a.addClass("disabled"), a.text("Processing..."), $("#tbodyAlumni").find("tr").length >= 5 && "0" == $("#hdfAlumniID").val()) return swal("", "Only 5 alumni allowed", "warning"), !1; var n = $("#fuAlumniPhoto").get(0); if (void 0 !== window.FormData && $("#fuAlumniPhoto").get(0).files.length > 0) { var l = $("#fuAlumniPhoto").get(0).files[0].size, i = ["png", "jpg", "jpeg"]; if (-1 == $.inArray($("#fuAlumniPhoto").val().split(".").pop().toLowerCase(), i)) return swal("", "Only formats are allowed : " + i.join(", "), "error"), a.text("Save"), void a.removeClass("disabled"); if (!("1048576" >= l)) return swal("", "1 Mb file size allow", "warning"), a.text("Save"), void a.removeClass("disabled") } for (var o = n.files, u = new FormData, r = 0; r < o.length; r++)u.append(o[r].name, o[r]); u.append("ID", $("#hdfAlumniID").val()), u.append("flag_faculty", $("#hdfAlumnitype").val()), u.append("FacultyName", $("#txtAlumniName").val()), u.append("AlumniDesignation", $("#txtAlumniDesignation").val()), u.append("Qualification", $("#drpAlumniQualification").val()), u.append("AreaofExcellence", $("#txtAreaofExcellenceAlu").val()), u.append("CurrentEmployer", $("#txtAlumniEmployer").val()), u.append("__RequestVerificationToken", $('input[name="__RequestVerificationToken"]', e).val()), $.ajax({ method: "POST", url: $("#hdfBaseUrl").val() + "Institute/FacultyAlumni/Save_Institute_Faculty", data: u, async: !1, cache: !1, contentType: !1, processData: !1, success: function (t) { } }).done(function (t) { "true" == t.flagExists.toString().toLowerCase() ? swal("warning", "Faculty already exists with same data!") : "false" == t.flag.toString().toLowerCase() ? swal("Oops...!", "Something went wrong! Please try again.") : swal({ title: "Success!", text: "Faculty Data saved successfully", type: "success", closeOnConfirm: !0, confirmButtonText: "OK", confirmButtonClass: "btn-primary", showLoaderOnConfirm: !0 }).then(function () { $("#btnCancelAlumni").trigger("click"), fill_grid_Alumni() }), a.removeClass("disabled"), a.text("Save") }).error(function () { swal("Oops...!", "Please try after some time"), a.text("Save"), a.removeClass("disabled") }), a.removeClass("disabled"), a.text("Save") }), $("#tbodyAlumni").on("click", ".btnEdit", function (t) { t.preventDefault(); var e = $(this).attr("data-id"); $.ajax({ method: "GET", url: $("#hdfBaseUrl").val() + "Institute/FacultyAlumni/Select_Institute_Faculty", data: { ID: e, flag_faculty: $("#hdfAlumnitype").val() } }).done(function (t) { $.each(t.List, function (t, e) { $("#hdfAlumniID").val(e.ID), $("#txtAlumniName").val(e.FacultyName), $("#txtAlumniDesignation").val(e.AlumniDesignation), $("#drpAlumniQualification").val(e.Qualification), $("#txtAreaofExcellenceAlu").val(e.AreaofExcellence), $("#txtAlumniEmployer").val(e.CurrentEmployer) }) }).error(function () { swal("Oops...!", "Please try after some time"), btn.text("Save"), btn.removeClass("disabled") }) }), $("#tbodyAlumni").on("click", ".btnDelete", function (t) { t.preventDefault(); var e = $(this).attr("data-id"); swal({ title: "Are you sure?", text: "You will not be able to recover this data!", type: "", closeOnConfirm: !0, showCancelButton: !0, confirmButtonText: "Yes, delete it!", confirmButtonClass: "btn-warning", showLoaderOnConfirm: !0 }).then(function () { $.ajax({ method: "POST", url: $("#hdfBaseUrl").val() + "Institute/FacultyAlumni/Delete_Institute_faculty", data: { ID: e }, success: function (t) { } }).done(function (t) { fill_grid_Alumni(), swal("Success!", "Your data has been deleted.") }).error(function () { swal("Oops...!", "Something went wrong from our side.") }) }) }) } function fill_grid_Alumni() { $.ajax({ method: "GET", url: $("#hdfBaseUrl").val() + "Institute/FacultyAlumni/Select_Institute_Faculty", data: { flag_faculty: $("#hdfAlumnitype").val() } }).done(function (t) { $("#tbodyAlumni").html(""); var e = 1; if (t.List.length > 0) $.each(t.List, function (t, a) { var n = $("<tr></tr>"); n.append("<td>" + e++ + "</td>"), n.append('<td><img style="height:55px;" src="' + $("#hdfBaseUrl").val() + a.Photo.toString() + '" alt="No Image" /></td>'), n.append("<td>" + a.FacultyName.toString() + "</td>"), n.append("<td>" + a.AlumniDesignation.toString() + "</td>"), n.append("<td>" + a.Qualification_Name.toString() + "</td>"), n.append("<td>" + a.CurrentEmployer.toString() + "</td>"); var l = '<a class="btn btn-success btnEdit" data-id="' + a.ID + '"><i class="glyphicon glyphicon-pencil"></i></a>', i = '<a class="btn btn-danger btnDelete" data-id="' + a.ID + '"><i class="glyphicon glyphicon-trash"></i></a>'; n.append("<td>" + l + " " + i + "</td>"), $("#tbodyAlumni").append(n) }); else { var a = $("<tr></tr>"); a.append('<td colspan="7">No data available.</td>'), $("#tbodyAlumni").append(a) } }).error(function () { swal("Oops...!", "Please try after some time"), btn.text("Save"), btn.removeClass("disabled") }) } $(document).ready(function () { page_click_Alumni(), page_init_Alumni() });