function page_event() { page_click(), "0" != $("#hdnagencyid").val() && EditSelectData() } function page_validation() { } function page_change() { $(".datetimepicker").datepicker({ orientation: "left", autoclose: !0, dateFormat: "dd-mm-yy", yearRange: "1900:" + ((new Date).getFullYear() - 16), todayHighlight: !1, changeMonth: !0, changeYear: !0, onSelect: function (e) { var t = e.split("-"), a = t[1] + "-" + t[0] + "-" + t[2], n = new Date("2018-01-01"), r = (new Date(n.getYear(), n.getMonth(), n.getDate()), n.getYear()), i = n.getMonth(), o = n.getDate(), c = new Date(a.substring(6, 10), a.substring(0, 2) - 1, a.substring(3, 5)), s = c.getYear(), l = c.getMonth(), g = c.getDate(); if (yearAge = r - s, i >= l) var d = i - l; else { yearAge--; d = 12 + i - l } if (o >= g) var y = o - g; else { y = 31 + o - g; --d < 0 && (d = 11, yearAge--) } yearAge, $("#txtYear").val(yearAge) } }) } function page_click() { $("#btnsaveagency").on("click", function (e) { e.preventDefault(); var t = $("#frmagencydetails"); if (t.parsley().validate(), !t.parsley().isValid()) return !1; var a = $(this); a.text("Processing..."), a.addClass("disabled"), $.ajax({ method: "POST", url: "/Admin/AgencyDetails/SaveAgencymaster", data: t.serialize(), async: !1, success: function (e) { } }).done(function (e) { "true" == e.flag.toString().toLowerCase() ? swal({ title: "Success!", text: "Data saved successfully.", type: "success", closeOnConfirm: !0, confirmButtonText: "OK", confirmButtonClass: "btn-primary", showLoaderOnConfirm: !0 }).then(function () { EditSelectData() }) : swal({ title: "Error!", text: "Data has not been saved. Please try again.", type: "error", closeOnConfirm: !0, confirmButtonText: "OK", confirmButtonClass: "btn-primary", showLoaderOnConfirm: !0 }), a.text("Save"), a.removeClass("disabled") }).error(function () { swal("Oops...!", "Something went wrong! Please try again."), a.text("Save"), a.removeClass("disabled") }) }) } function EditSelectData() { $.ajax({ method: "POST", url: "/Admin/AgencyDetails/SelectAgencymaster" }).done(function (e) { $.each(e.List, function (e, t) { $("#hdnagencyid").val(t.agencyid), $("#txtnameagency").val(t.nameofagency), $("#txtaddress").val(t.agencyaddress), $("#txtemail").val(t.email), $("#drpcountrycode").val(t.countrycode), $("#txtMobile").val(t.mobile), $("#drptypeofagency").val(t.typeofagency) }) }).error(function () { }) } $(document).ready(function () { page_event() });