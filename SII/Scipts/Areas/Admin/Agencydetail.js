function page_event_det() { page_click_Det(), "0" != $("#hdnagencyid").val() && EditSelectData_det() } function page_click_Det() { $("#btnsave").on("click", function (e) { e.preventDefault(); var t = $("#frmentitlement"); if (t.parsley().validate(), !t.parsley().isValid()) return !1; var n = $(this); n.text("Processing..."), n.addClass("disabled"), $.ajax({ method: "POST", url: "/Admin/AgencyDetails/SaveAgencyDetail", data: t.serialize(), async: !1, success: function (e) { } }).done(function (e) { "true" == e.flag.toString().toLowerCase() ? swal({ title: "Success!", text: "Data saved successfully.", type: "success", closeOnConfirm: !0, confirmButtonText: "OK", confirmButtonClass: "btn-primary", showLoaderOnConfirm: !0 }).then(function () { EditSelectData_det(), clear() }) : swal({ title: "Error!", text: "Data has not been saved. Please try again.", type: "error", closeOnConfirm: !0, confirmButtonText: "OK", confirmButtonClass: "btn-primary", showLoaderOnConfirm: !0 }), n.text("Save"), n.removeClass("disabled") }).error(function () { swal("Oops...!", "Something went wrong! Please try again."), n.text("Save"), n.removeClass("disabled") }) }), $("#tbodyentitlement").on("click", ".btnDelete", function (e) { e.preventDefault(); var t = $(this).attr("data-id"); swal({ title: "Are you sure?", text: "You will not be able to recover this data!", type: "", closeOnConfirm: !0, showCancelButton: !0, confirmButtonText: "Yes, delete it!", confirmButtonClass: "btn-warning", showLoaderOnConfirm: !0 }).then(function () { $.ajax({ method: "POST", url: "/Admin/AgencyDetails/delete_tbl_Agency_detail", data: { ID: t }, success: function (e) { } }).done(function (e) { EditSelectData_det(), swal("Success!", "Your data has been deleted.") }).error(function () { swal("Oops...!", "Something went wrong from our side.") }) }) }) } function clear() { $("#txtnameEntitlement").val(""), $("#txtnoofstudent").val(""), $("#drpCountryofStay").val(""), $("#chkg1").prop("checked", !1), $("#chkg2").prop("checked", !1), $("#chkg3").prop("checked", !1), $("#chkg4").prop("checked", !1) } function EditSelectData_det() { $.ajax({ method: "POST", url: "/Admin/AgencyDetails/SelectAgencyDetail" }).done(function (e) { $("#tbodyentitlement").html(""); var t = 1; e.List.length > 0 && $.each(e.List, function (e, n) { var a = $("<tr></tr>"); a.append("<td>" + t++ + "</td>"), a.append("<td>" + n.nameofentitlename.toString() + "</td>"); var o = '<a class="btn btn-danger btnDelete" data-id="' + n.id + '"><i class="glyphicon glyphicon-trash"></i></a>'; a.append("<td>" + o + "</td>"), $("#tbodyentitlement").append(a) }) }).error(function () { }) } $(document).ready(function () { page_event_det() });