function page_event() { page_click(), Bind_StudentFieldList() } function page_click() { $("#btnsavechoicefilling").on("click", function (e) { e.preventDefault(); var t = ""; $("#tbodyFill  > tr").each(function () { $this = $(this), t = "" == t ? $(this).attr("id") : t + "," + $(this).attr("id") }), $.ajax({ method: "POST", url: "/admission/ChoiceFilling/update_StudentChoiceFilling", data: { ID: t }, async: !1, success: function (e) { } }).done(function (e) { "true" == e.flag.toString().toLowerCase() && swal({ title: "Saved", text: "Your Choice Filling Saved Successfully..!!", type: "success", closeOnConfirm: !0, confirmButtonText: "OK", confirmButtonClass: "btn-primary", showLoaderOnConfirm: !0 }).then(function () { $(".swal2-overlay").hide(), Bind_StudentFieldList() }) }).error(function () { swal("Oops...!", "Something went wrong! Please try again."), btn.text("Save"), btn.removeClass("disabled") }) }), $("#btnsavechoice").on("click", function (e) { e.preventDefault(); var t = $("#frmStep2"); if (t.parsley().validate(), !t.parsley().isValid()) return !1; $("#drpchangeseqfrom").val() != $("#drpchangeseqto").val() ? ("" != $("#drpchangeseqfrom").val() && "" != $("#drpchangeseqto").val() && $.ajax({ method: "POST", url: "/admission/ChoiceFilling/UpdateSequenceNumber_swap_move", data: t.serialize(), async: !1, success: function (e) { } }).done(function (e) { "true" == e.flag.toString().toLowerCase() && swal({ title: "Saved", text: "Your Choices have been swapped successfully..", type: "success", closeOnConfirm: !0, confirmButtonText: "OK", confirmButtonClass: "btn-primary", showLoaderOnConfirm: !0 }).then(function () { $(".swal2-overlay").hide(), Bind_StudentFieldList() }) }).error(function () { swal("Oops...!", "Something went wrong! Please try again."), btn.text("Save"), btn.removeClass("disabled") }), $("#drptypechoicefilling").val("")) : swal({ title: "Can't Select Same Choice Number ", text: "Same Choice", type: "warning" }) }), $("#tbodyFill").on("click", ".btnGridDelete", function (e) { e.preventDefault(); var t = $(this).attr("data-id"); swal({ title: "Are you sure?", text: "Your choice will be deleted!", type: "warning", closeOnConfirm: !0, showCancelButton: !0, confirmButtonText: "Yes, delete it!", confirmButtonClass: "btn-warning", showLoaderOnConfirm: !0 }).then(function () { $.ajax({ method: "POST", url: "/admission/ChoiceFilling/Delete_InstituteList", data: { ID: t }, success: function (e) { } }).done(function (e) { swal("Deleted!", "Your choice has been deleted.", "success"), Bind_StudentFieldList() }).error(function () { swal("Oops...!", "Something went wrong from our side.", "error") }) }) }), $("#tbodyFill").on("click", ".btnupdown", function (e) { e.preventDefault(), Rearrange_Index() }), $("#btnSubmitchoice").on("click", function (e) { e.preventDefault(), $.ajax({ method: "POST", url: "/admission/ChoiceFilling/student_submit_choice_filling", success: function (e) { } }).done(function (e) { "true" == e.flag.toString().toLowerCase() ? (swal({ title: "Submitted!", text: "Dear " + $("#hdnstudentname").val() + ", thank you for submitting your preference. Please note that this filled choices will be considered final after 30th of June, 2018. You can edit the choices before 30th of June, 2018", timer: 15e3, type: "success", showConfirmButton: !1 }), setTimeout(function () { window.location.href = "/admission/Dashboard" }, 4e3)) : (swal({ title: "", text: "Dear " + $("#hdnstudentname").val() + ", you have not chosen any course, please choose your courses in desired institute and submit choices", type: "warning" }), btn.text("Save"), btn.removeClass("disabled")) }).error(function () { swal("Error!", "Something went wrong from our side.", "error") }) }) } function Bind_StudentFieldList() { $(".loading").show(); var e = $("#frmStep2"); $(".ChoiceNumberChange").html(""), $(".ChoiceNumberChange").prepend('<option value="">--Select--</option>'), $("#tbodyFill").html(""), $.ajax({ method: "GET", async: !1, url: "/admission/ChoiceFilling/Select_Filled_Institute", data: e.serialize(), success: function (e) { } }).done(function (e) { var t = 1, n = "'tr:first'"; $(".data-grid2").DataTable().clear().destroy(), $.each(e.List, function (e, i) { var o = $("<tr id=" + i.ID + " data-moduleid=" + i.InstituteID + "></tr>"); o.append("<td><strong>" + t++ + "</strong></td>"), o.append("<td>" + i.InstituteName + "</td>"), o.append("<td>" + i.Natureofcourse + "</td>"), o.append("<td>" + i.SeatWaivertype + "</td>"), "false" == $("#hdfsubmitChoiceFill").val().toLowerCase() && (UPbtn = '<a class="label label-success btnGridUp btnupdown" onclick="$(this).parents(' + n + ").insertBefore($(this).parents(" + n + ').prev())"; title="To Move Up" data-toggle="tooltip" type="button" data-id="' + i.ID + '" ><i class="glyphicon glyphicon-arrow-up"></i></a>', Downbtn = '<a class="label label-warning btnGridDown btnupdown" onclick="$(this).parents(' + n + ").insertAfter($(this).parents(" + n + ').next())"; title="To Move Down" data-toggle="tooltip" type="button" data-id="' + i.ID + '" ><i class="glyphicon glyphicon-arrow-down"></i></a>', dtlbtn = '<a class="label label-danger btnGridDelete" title="To delete your choice" data-toggle="tooltip" type="button" data-id="' + i.ID + '" ><i class="glyphicon glyphicon-remove"></i></a>', o.append("<td>" + UPbtn + "&nbsp;&nbsp;" + Downbtn + "&nbsp;&nbsp;" + dtlbtn + "</td>")), $("#tbodyFill").append(o), $(".ChoiceNumberChange").append('<option value="' + i.ID + '">' + i.SequenceNumber + "</option>") }), InitDatatablestbl2() }).error(function () { swal("Oops...!", "Something went wrong! Please try again.") }), $(".loading").hide() } function Rearrange_Index() { var e = 1; $("#tbodyFill > tr > td > strong").each(function () { $(this).text(e), e++ }) } function MoveUp(e) { $(e).parents("tr:first").insertBefore($(this).parents("tr:first").prev()); alert(1) } function MoveDown(e) { $(this).parents("tr:first").insertAfter($(this).parents("tr:first").next()) } function InitDatatablestbl2() { $(".loading").hide(), $("#tbl2").DataTable({ ordering: !1, bDestroy: !0, paging: !1 }) } $(document).ready(function () { page_event() });