var forminuse = !1; function page_click() { $("#tbodyFill").on("click", ".btnupdown", function (e) { e.preventDefault(), Rearrange_Index() }), $("#btnsavechoice").on("click", function (e) { e.preventDefault(); var t = $("#frmStep2"); return t.parsley().validate(), !!t.parsley().isValid() && (!forminuse && void ($("#drpFrom").val() != $("#drpTo").val() ? ("" != $("#drpFrom").val() && "" != $("#drpTo").val() && (forminuse = !0, $.ajax({ method: "POST", url: $("#hdfBaseUrl").val() + "admission/StudentChoiceFilling/SWAPRank", data: t.serialize(), async: !1, success: function (e) { } }).done(function (e) { "true" == e.flag.toString().toLowerCase() && SuccessMessageCallBack("Your Choices have been swapped successfully..!!", function () { fill_filled_choices() }), forminuse = !1 }).error(function () { ErrorMessage("Something went wrong! Please try again."), btn.text("Save"), btn.removeClass("disabled"), forminuse = !1 })), $("#drptypechoicefilling").val("")) : ErrorMessage("Can't Select Same Choice Number"))) }), $(document).find("#tbodyFill").on("click", ".btnGridUp", function (e) { e.preventDefault(); var t = $(this); if (forminuse) return !1; var n = t.parent().parent().find(".btnGridUp").attr("data-id"), a = t.parent().parent().prev().find(".btnGridUp").attr("data-id"); "" != n && "" != a && (forminuse = !0, $.ajax({ method: "POST", url: $("#hdfBaseUrl").val() + "admission/StudentChoiceFilling/SWAPRank", data: { Type: "SWAP", drpformid: n, drptoid: a }, async: !1 }).done(function (e) { "true" == e.flag.toString().toLowerCase() && SuccessMessageCallBack("Your Choices have been swapped successfully..!!", function () { fill_filled_choices() }), forminuse = !1 }).error(function () { ErrorMessage("Something went wrong! Please try again."), t.text("Save"), t.removeClass("disabled"), forminuse = !1 })) }), $(document).find("#tbodyFill").on("click", ".btnGridDown", function (e) { e.preventDefault(); var t = $(this); t = $(this); if (forminuse) return !1; var n = t.parent().parent().find(".btnGridUp").attr("data-id"), a = t.parent().parent().next().find(".btnGridUp").attr("data-id"); "" != n && "" != a && (forminuse = !0, $.ajax({ method: "POST", url: $("#hdfBaseUrl").val() + "admission/StudentChoiceFilling/SWAPRank", data: { Type: "SWAP", drpformid: n, drptoid: a }, async: !1 }).done(function (e) { "true" == e.flag.toString().toLowerCase() && SuccessMessageCallBack("Your Choices have been swapped successfully..!!", function () { fill_filled_choices() }), forminuse = !1 }).error(function () { ErrorMessage("Something went wrong! Please try again."), t.text("Save"), t.removeClass("disabled"), forminuse = !1 })) }) } function fill_filled_choices() { var e = $(document).find("#tbodyFill"); $(".ChoiceNumberChange").html(""), $(".ChoiceNumberChange").prepend('<option value="">--Select--</option>'), e.html(""), $.ajax({ async: !1, url: $("#hdfBaseUrl").val() + "admission/StudentChoiceFilling/SelectStdCh" }).done(function (t) { $.each(t.List, function (t, n) { var a = $("<tr></tr>"); a.append("<td>" + n.SequenceNumber + "</td>"), a.append("<td>" + n.InstituteName + "</td>"), a.append("<td>" + n.Discipline + "</td>"), a.append("<td>" + n.InstituteCourseName + "</td>"), a.append("<td>" + n.Specialization + "</td>"), UPbtn = '<a class="label label-success btnGridUp btnupdown" title="To Move Up" data-toggle="tooltip" type="button" data-id="' + n.id + '" ><i class="glyphicon glyphicon-arrow-up"></i></a>', Downbtn = '<a class="label label-warning btnGridDown btnupdown" title="To Move Down" data-toggle="tooltip" type="button" data-id="' + n.id + '" ><i class="glyphicon glyphicon-arrow-down"></i></a>', a.append("<td>" + UPbtn + "&nbsp;&nbsp;" + Downbtn + "</td>"), e.append(a), $(".ChoiceNumberChange").append('<option value="' + n.id + '">' + n.SequenceNumber + "</option>") }), $("#tblFillChoices").DataTable({ ordering: !1, paging: !1, scrollY: "350px", scrollCollapse: !0, bDestroy: !0 }) }).error(function () { ErrorMessage("Somthing went wrong. Please try again.") }) } function Rearrange_Index() { var e = 1; $("#tbodyFill > tr > td > strong").each(function () { $(this).text(e), e++ }) } function MoveUp(e) { $(e).parents("tr:first").insertBefore($(this).parents("tr:first").prev()) } function MoveDown(e) { $(e).parents("tr:first").insertAfter($(this).parents("tr:first").next()) } $(document).ready(function () { fill_filled_choices(), page_click() });