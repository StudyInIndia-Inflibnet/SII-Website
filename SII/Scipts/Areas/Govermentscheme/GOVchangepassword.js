function page_events() { page_click_events() } function page_click_events() { $("#btnChangePassword").on("click", function (e) { e.preventDefault(); var a = $("#frm"); if (a.parsley().validate(), !a.parsley().isValid()) return !1; if ($("#txtOldPassword").val() == $("#txtNewPassword").val()) return swal("Password not match", "New password cannot be same as previous.", "warning"), $("#btnRefreshCaptcha").trigger("click"), $("#txtCaptcha").val(""), $("#txtNewPassword").val(""), $("#txtRetypePassword").val(""), $("#txtNewPassword").focus(), !1; var t = $(this); t.text("Processing..."), t.addClass("disabled"), $.ajax({ method: "POST", url: "/GovernmentSchemeAdmission/changepassword/Agent_Check_And_ChangePassword", data: a.serialize() + "&CaptchaStr=" + $("#txtCaptcha").val() }).done(function (e) { "true" == e.flagCaptcha.toString().toLowerCase() ? "true" == e.flagPwdChanged.toString().toLowerCase() ? (t.text("Redirecting..."), swal({ title: "Password Changed", text: "Your password has been changed successfully. You are being redirected...", type: "success", closeOnConfirm: !0, confirmButtonText: "OK", confirmButtonClass: "btn-primary", showLoaderOnConfirm: !0 }).then(function () { window.location.href = "/GovernmentSchemeAdmission/Login" })) : (t.text("Change Password"), t.removeClass("disabled"), swal("", "Invalid old password.", "error"), window.location.href = window.location.href, $("#btnRefreshCaptcha").trigger("click"), $("#txtCaptcha").val("")) : (t.text("Change Password"), t.removeClass("disabled"), swal("Invalid captcha", "Invalid captcha entered.", "error"), window.location.href = window.location.href, $("#btnRefreshCaptcha").trigger("click"), $("#txtCaptcha").val("")) }).error(function () { t.text("Change Password"), t.removeClass("disabled"), swal("", "Somthing went wrong. Please try again.", "error"), window.location.href = window.location.href, $("#btnRefreshCaptcha").trigger("click"), $("#txtCaptcha").val("") }) }) } $(document).ready(function () { $("#btnChangePassword").show(), $("#btnRefreshCaptcha").show(), page_events() });