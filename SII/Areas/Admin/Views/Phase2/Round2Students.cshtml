
@{
    ViewBag.Title = "List";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}
@section PageHead{
    <div class="row">
        <div class="col-md-12">
            <h3>
                @ViewBag.DisplayName
                <a class="btn btn-primary pull-right" href="~/Admin/Phase2/Reports">Back</a>
            </h3>
        </div>
    </div>
}
<div class="row">
    <div class="loading"></div>
    <div class="col-md-12">
        <div class="panel panel-info panel-border-color panel-border-color-primary">
            <div class="tab-container">
                <div class="tab-content">
                    <div class="panel-body in table-responsive">
                        <table class="table table-bordered table-striped table-hover dataTable">
                            <thead>
                                <tr>
                                    <th>Srno</th>
                                    <th>StudentID</th>
                                    <th>Student Name</th>
                                    <th>DOB</th>
                                    <th>Country</th>
                                    <th>Gender</th>
                                    <th>Mobile</th>
                                    <th>Email</th>
                                    <th>Registration Date</th>
                                    <th>SubmitChoiceFill</th>
                                    <th>SubmitChoiceFillingDate</th>
                                    <th>EditApplication</th>
                                    <th>EditApplicationDate</th>
                                    <th>ImportedFromBackend</th>
                                    <th>Submitted Choice Filling?</th>
                                    <th>Submission Date</th>
                                    <th>Edited Application?</th>
                                    <th>Edited Date</th>
                                    <th>Programme Level</th>
                                    <th>Institute</th>
                                    <th>InstituteCourse</th>
                                    <th>Institute Action</th>
                                    <th>Institute Action Date</th>
                                    <th>Institute Action Remarks</th>
                                    <th>Addmission Letter</th>
                                    <th>Addmission Letter Uploaded Date</th>
                                    <th>Student Action</th>
                                    <th>Student Action Date</th>
                                    <th>Student Action Remarks</th>
                                    <th>Admitted Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                @{
                                    SIIRepository.Adminservice.ReportsRepository _objRepo = new SIIRepository.Adminservice.ReportsRepository();
                                    System.Data.DataSet _ds = _objRepo.SELECT_PHASE2_KPI_SecondRound_OverView("List", ViewBag.Control, "", "", "");
                                    if (_ds != null)
                                    {
                                        if (_ds.Tables[0].Rows.Count > 0)
                                        {
                                            int i = 1;
                                            foreach (System.Data.DataRow _dr in _ds.Tables[0].Rows)
                                            {
                                <tr>
                                    <td>@(i++)</td>
                                    <td>
                                        <a href="~/Admin/PreviewStudent/ViewDetails/@_dr["Studentid"].ToString()?d=ChoiceFilling" target="_blank">
                                            @_dr["StudentID"].ToString()
                                        </a>
                                    </td>
                                    <td>@_dr["StudentName"].ToString()</td>
                                    <td>@Convert.ToDateTime(_dr["DateOfBirth"].ToString()).ToString("dd-MM-yyyy")</td>
                                    <td>@_dr["Country_Name"].ToString()</td>
                                    <td>@_dr["Gender"].ToString()</td>
                                    <td>@_dr["Mobile"].ToString()</td>
                                    <td>@_dr["Email"].ToString()</td>
                                    <td>@_dr["RegistrationDate"].ToString()</td>
                                    <td>@_dr["SubmitChoiceFill"].ToString()</td>
                                    <td>@_dr["SubmitChoiceFillingDate"].ToString()</td>
                                    <td>@_dr["EditApplication"].ToString()</td>
                                    <td>@_dr["EditApplicationDate"].ToString()</td>
                                    <td>@_dr["ImportedFromBackend"].ToString()</td>

                                    <td>@_dr["SubmitChoiceFill"].ToString()</td>
                                    <td>@_dr["SubmitChoiceFillingDate"].ToString()</td>
                                    <td>@_dr["EditApplication"].ToString()</td>
                                    <td>@_dr["EditApplicationDate"].ToString()</td>
                                    <td>@_dr["ProgramLevel"].ToString()</td>
                                    <td>@_dr["Institute_Alloted"].ToString()</td>
                                    <td>@_dr["InstituteCourse_Alloted"].ToString()</td>
                                    <td>@_dr["ISApprovebyInstitute"].ToString()</td>
                                    <td>@_dr["ApprovebyInstituteDate"].ToString()</td>
                                    <td>@_dr["ApprovebyInstituteRemarks"].ToString()</td>
                                    <td>
                                        @if (@_dr["Doc_AllotmentLetter"].ToString() == "---")
                                        {
                                            <span>---</span>
                                        }
                                        else
                                        {
                                            <a class="btn btn-sm btn-info" href="~/@_dr["Doc_AllotmentLetter"].ToString()" target="_blank">View</a>
                                        }
                                    </td>
                                    <td>@_dr["Doc_AllotmentLetterDate"].ToString()</td>
                                    <td>@_dr["StudentStatus"].ToString()</td>
                                    <td>@_dr["StudentStatusDate"].ToString()</td>
                                    <td>@_dr["StudentStatusRemarks"].ToString()</td>
                                    <td>@_dr["IsAdmittedByInstitute"].ToString()</td>
                                </tr>
                                            }
                                        }
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<link href="~/assets/lib/datatables/css/dataTables.bootstrap.min.css" rel="stylesheet" />
@section scripts{
    <script src="~/assets/lib/datatables/js/jquery.dataTables.min.js"></script>
    <script src="~/assets/lib/datatables/js/dataTables.bootstrap.min.js"></script>
    <script src="/assets/lib/datatables/plugins/buttons/js/dataTables.buttons.js" type="text/javascript"></script>
    <script src="/assets/lib/datatables/plugins/buttons/js/buttons.html5.js" type="text/javascript"></script>
    <script src="/assets/lib/datatables/plugins/buttons/js/buttons.flash.js" type="text/javascript"></script>
    <script src="/assets/lib/datatables/plugins/buttons/js/buttons.print.js" type="text/javascript"></script>
    <script src="/assets/lib/datatables/plugins/buttons/js/buttons.colVis.js" type="text/javascript"></script>
    <script src="/assets/lib/datatables/plugins/buttons/js/buttons.bootstrap.js" type="text/javascript"></script>
    <script>
        $(document).ready(function () {
            $("#mainToggle").addClass("be-wrapper be-collapsible-sidebar be-collapsible-sidebar-collapsed");

            $(".dataTable").DataTable({
                searching: true,
                paging: true,
                info: true,                   // TO DISPLAY THE INFO 'SHOWING 1 TO X OF Y ENTRIES'
                lengthMenu: [[25, 50, -1], [25, 50, "All"]],
                dom: 'Bfrtip',
                buttons: [
                    {
                        extend: 'csvHtml5',
                        text: 'Export',
                        titleAttr: 'CSV'
                    },
                ],
                columnDefs: [{
                    "targets": 5,
                    "orderable": false
                }]
            });
        });
    </script>
}